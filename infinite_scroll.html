<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        background-color: #00ffff;
      }
      .image-holder {
        max-width: 1100px;
        padding: 0% 20%;
      }
    </style>
  </head>
  <body>
    <div class="image-holder"></div>
    <script>
      const imageHolder = document.querySelector(".image-holder");
      let i = 0;

      const getImageSourceURL = () => {
        const randomNum = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);
        return `http://api.adorable.io/avatars/${randomNum}`;
      };

      const getELementImage = () => {
        const img = document.createElement("img");
        img.src = getImageSourceURL();
        img.style.width = "15rem";
        img.style.height = "15rem";
        img.style.margin = "1rem";
        return img;
      };

      const getELement = () => {
        const image = getELementImage();
        imageHolder.append(image);
      };

      const loadNextBatch = (count = 30) => {
        while (count > 0) {
          getELement();
          count--;
        }
      };
      loadNextBatch();

      window.onscroll = () => {
        // if (getScrollTop() < getDocumentHeight() - window.innerHeight) return;
        const scrollable =
          document.documentElement.scrollHeight - window.innerHeight;
        const scrollY = window.scrollY;
        console.log(scrollable, scrollY);
        if (scrollable === scrollY) loadNextBatch();
      };
    </script>
  </body>
</html>
